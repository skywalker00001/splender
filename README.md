# 🌟 璀璨宝石宝可梦

一个结合璀璨宝石（Splendor）和宝可梦元素的多人在线桌游。

## 🚀 快速开始

```bash
./start_web.sh
```

然后在浏览器打开 http://localhost:5000

## 🎮 功能特点

- 🌐 **多人在线**：支持2-4名玩家同时游戏
- 🤖 **AI机器人**：可添加简单/中等/困难三种难度的AI对手
- 👑 **房间管理**：房主可踢出玩家、删除房间
- 📱 **响应式设计**：支持PC和移动端浏览器

## 📦 项目结构

```
splendor/
├── start_web.sh          # 启动脚本（入口）
├── web_app.py            # Web应用主程序
├── cuicanbaoshi.py       # 游戏核心逻辑
├── backend/              # 后端API
│   ├── app.py            # Flask API
│   ├── ai_player.py      # AI机器人
│   └── requirements.txt  # Python依赖
└── web/                  # 前端文件
    ├── templates/        # HTML模板
    └── static/           # CSS/JS资源
```

## 🎯 游戏规则（完整版）

### 胜利条件
- **目标18分**：首先达到18分触发最终回合，补完本轮后比总分
  
### 每回合可做一件事
1. **拿球**：
   - 3种不同颜色的球
   - 2个同色球（该颜色余量须≥4）
   - 不能直接拿大师球

2. **预定卡牌**：从场上拿1张到手牌，获得1个大师球
   - 手牌最多3张
   - 稀有/传说不能预定

3. **抓宝可梦**：支付球购买卡牌
   - 稀有/传说需额外1个大师球
   - 永久球提供折扣

### 🔄 进化机制（核心）
- **时机**：每回合结束自动检查，每回合最多进化1次
- **条件**：需要展示区永久球满足进化门槛
- **示例**：小火龙→火恐龙（需3个黄色永久球）→喷火龙（需2个粉色永久球）

### ⚖️ 球数上限
- 回合结束时最多保留10枚球，多余弃回供应

## 🛠️ 远程访问

如果在远程服务器上运行，使用SSH端口转发：

```bash
# 在本地电脑执行
ssh -L 5000:localhost:5000 user@server
```

然后在本地浏览器访问 http://localhost:5000

## 📝 依赖

- Python 3.7+
- Flask
- Flask-CORS

所有依赖会在运行 `start_web.sh` 时自动安装。

## 🧪 当前状态

### ✅ 已实现（测试通过）
- ✅ 18分胜利条件
- ✅ 进化机制（自动检查永久球门槛）
- ✅ 大师球系统（只能通过预定获得）
- ✅ 拿球规则（3不同色 / 2同色≥4）
- ✅ 10球上限
- ✅ 稀有/传说卡（双永久球，需大师球）
- ✅ AI机器人对战
- ✅ 房间管理（踢出、删除）

### 📋 待完善
- ⏳ **等待完整卡牌CSV数据**（90张主牌 + 稀有/传说）
- 当前使用简化测试卡牌（10张Lv1 + 10张Lv2 + 6张Lv3 + 6张特殊）

### 🧪 测试
```bash
python3 test_evolution.py  # 测试进化等核心机制
```

---

**Enjoy! 🎉**  
**等待完整卡牌数据导入中...**
