# 🔧 端口转发问题解决方案

## 问题描述
Cursor的Dev Tunnels隧道达到10个端口上限，无法添加新的端口转发：
```
Error: Resource limit exceeded - PortsPerTunnel (10)
```

## ✅ 解决方案

### 方案1：重启Cursor远程连接（推荐，90%有效）

**步骤：**

1. **断开并清理远程服务器**
   - 按 `Ctrl+Shift+P` (Mac: `Cmd+Shift+P`)
   - 输入并选择：`Remote-SSH: Kill VS Code Server on Host`
   - 选择当前远程主机
   - 等待3-5秒

2. **完全退出Cursor**
   - 关闭所有Cursor窗口
   - 等待5秒钟

3. **重新打开Cursor并连接**
   - 重新打开Cursor
   - 重新连接到远程服务器
   - 等待连接完成

4. **手动添加端口转发**
   - 按 `Ctrl+Shift+P`
   - 输入：`Forward a Port`
   - 输入端口号：`5001`
   - 选择：`Public`

5. **访问生成的URL**
   - Cursor会生成类似这样的地址：
   - `https://xxx-5001.asse.devtunnels.ms/`

---

### 方案2：使用PORTS面板添加

1. **在Cursor底部找到 "PORTS" 标签**
   - 如果看不到，点击底部的 `...` 找到 "Ports"

2. **点击 "+" 按钮添加端口**
   - 输入：`5001`
   - 选择可见性：`Public`

3. **复制生成的URL**
   - 在PORTS面板中，右键点击端口
   - 选择 "Copy Local Address" 或 "Copy Forwarded Address"

---

### 方案3：联系IT支持

如果上述方案都不起作用，可能需要：

1. **联系公司IT团队**
   - 说明Dev Tunnels端口达到上限
   - 请求清理或重置隧道配置

2. **提供信息**
   - 隧道ID：`kind-chair-hsw9bqf`
   - 端口限制：10个端口/隧道

---

## 🎮 游戏服务器信息

**当前运行状态：**
- ✅ 服务器已启动
- 📡 端口：`5001`
- 🔗 本地地址：`http://localhost:5001`
- 🌐 内网地址：`http://10.243.96.81:5001`

**启动命令：**
```bash
cd /home/work/houyi/pj_25_q4/splendor
export PORT=5001
python3 web_app.py
```

**或使用启动脚本：**
```bash
export PORT=5001
bash /home/work/houyi/pj_25_q4/splendor/start_web.sh
```

---

## 🔍 检查服务器状态

```bash
# 检查服务器是否运行
netstat -tlnp 2>/dev/null | grep :5001

# 测试API
curl http://localhost:5001/api/health
```

---

## 📝 常见问题

**Q: 为什么PORTS面板是空的但还报端口上限？**
A: 隧道服务端缓存了端口信息，需要重启远程连接清理。

**Q: 重启后还是不行怎么办？**
A: 尝试：
1. 完全关闭Cursor
2. 等待10分钟让隧道过期
3. 重新打开并连接

**Q: 可以使用其他端口吗？**
A: 可以，设置环境变量：
```bash
export PORT=5002  # 或其他端口
python3 web_app.py
```

---

## 🆘 紧急联系

如果以上方法都无法解决，建议：
1. 截图错误信息
2. 联系公司IT支持团队
3. 提供隧道ID和端口信息

